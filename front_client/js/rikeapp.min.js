var appController=angular.module("rikeFrontAppGalleryController",["ngAnimate","ngTouch","ap.fotorama"]);appController.controller("GalleryCtrl",["$scope","$routeParams","$resource",function(a,b,c){a.loader={loading:!0},a.options={width:"100%",height:400,loop:!0,keyboard:!0,nav:"thumbs"},a.items=[],a.fotoramaoptions={margin:10,fit:"scaledown",width:"100%",maxheight:800,loop:!0,keyboard:!0,nav:"thumbs",transition:"slide",allowfullscreen:!0,spinner:{lines:13,color:"rgba(255, 255, 255, .75)"},thumbborderwidth:1,thumbmargin:5};var d=c("/api/pics/"+b.category+"+"+b.sub);d.query(function(b){b.forEach(function(b,c){var d={id:c,pos:c,active:0,full:"../uploads/"+b.url,img:"../uploads/"+b.url,thumb:"../uploads/"+b.url,html:"",caption:b.caption};a.items.push(d)}),a.loader.loading=!1})}]);var appController=angular.module("rikeFrontAppHomeController",["rikeAppService"]);appController.controller("MainCtrl",["$scope","$location","$resource","CategoryService",function(a,b,c,d){a.isActive=function(a){return a===b.path()},a.loader={loading:!0},a.categories=[],d.get(function(b){a.categories=b,a.loader.loading=!1})}]),appController.controller("HomeCtrl",["$scope",function(a){a.name="Rike"}]);var appController=angular.module("rikeFrontAppSubcategoryController",["rikeAppService"]);appController.controller("SubcategoryCtrl",["$scope","$location","SubcategoryService","$routeParams",function(a,b,c,d){a.isActive=function(a){return a===b.path()},a.loader={loading:!0},a.subcategories=[],c.get(d.category,function(b){a.subcategories=b,a.loader.loading=!1})}]);var appController=angular.module("rikeFrontAppHomeController",["rikeAppService"]);appController.controller("MainCtrl",["$scope","$location","$resource","CategoryService",function(a,b,c,d){a.isActive=function(a){return a===b.path()},a.loader={loading:!0},a.categories=[],d.get(function(b){a.categories=b,a.loader.loading=!1}),a.css="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"}]),appController.controller("HomeCtrl",["$scope",function(a){a.name="Rike"}]);var rikeFrontApp=angular.module("rikeFrontApp",["ngResource","ngRoute","ngAnimate","ap.fotorama","rikeAppService","rikeFrontAppHomeController","rikeFrontAppGalleryController","rikeFrontAppSubcategoryController"]);rikeFrontApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/partials/home-partial",controller:"HomeCtrl"}).when("/show/:category",{templateUrl:"views/partials/subcategory-partial"}).when("/pics/:category/:sub",{templateUrl:"views/partials/gallery-partial"}).when("/Contact",{templateUrl:"views/partials/contact-partial"}).otherwise({reditrectTo:"/"})}]);var appService=angular.module("rikeAppService",[]);appService.service("FileService",["$resource",function(a){function b(a,b,c,d){this.filename=a,this.caption=b,this.category=c,this.subcategory=d}function c(a,b,c){for(var d=0;d<a.length;d++)if(a[d][b]===c)return d;return-1}var d=[];return{get:function(){return d},add:function(a,c,e,f){d.push(new b(a,c,e,f))},remove:function(a){var b=c(d,"filename",a);b>-1&&d.splice(b,1)},"delete":function(b){var c=a("/api/pics/unlink/:filename"),d=new c({filename:b});d.$remove({filename:b},function(a,b){a&&console.log(a)})}}}]),appService.factory("CategoryService",["$resource",function(a){var b=a("/api/cat"),c=[];return{get:function(a){b.query().$promise.then(function(b){c=b,a(c)})},add:function(a,c){var d=new b;d.value=a,d.$save(function(a){c(a)})},remove:function(b){var c=a("/api/cat/:id"),d=new c({_id:b._id});d.$remove({id:b._id},function(a,b){a&&console.log(a)})}}}]),appService.service("SubcategoryService",["$resource",function(a){return{get:function(b,c){"undefined"!=typeof b&&(Subcategory=a("/api/cat/subs/"+b),"undefined"!=typeof b.value&&(Subcategory=a("/api/cat/subs/"+b.value))),Subcategory.query().$promise.then(function(a){c(a)})},add:function(b,c,d){var e=a("/api/cat/subs"),f=new e;f.name=b,f.ubercategory=c,f.preview="",f.$save(function(a){d(a)})},setPreviewPicture:function(b,c,d){var e=a("/api/cat/sub/"+b),f=e.get({},function(){console.log(f),f.preview=d,f.$save()})},remove:function(b){var c=a("/api/cat/subs/:id"),d=new c({_id:b._id});d.$remove({id:b._id},function(a,b){a&&console.log(a)})}}}]);